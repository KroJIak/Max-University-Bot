{"openapi":"3.1.0","info":{"title":"MAX Bot API","version":"1.0.0"},"paths":{"/api/v1/health":{"get":{"tags":["health"],"summary":"Health Check","operationId":"health_check_api_v1_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/users":{"post":{"tags":["users"],"summary":"Create User","description":"Создать нового пользователя","operationId":"create_user_api_v1_users_post","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserCreate"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["users"],"summary":"Get Users","description":"Получить список всех пользователей","operationId":"get_users_api_v1_users_get","parameters":[{"name":"skip","in":"query","required":false,"schema":{"type":"integer","default":0,"title":"Skip"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":100,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/UserResponse"},"title":"Response Get Users Api V1 Users Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/users/{user_id}":{"get":{"tags":["users"],"summary":"Get User","description":"Получить пользователя по user_id","operationId":"get_user_api_v1_users__user_id__get","parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"integer","title":"User Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["users"],"summary":"Update User","description":"Обновить данные пользователя","operationId":"update_user_api_v1_users__user_id__put","parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"integer","title":"User Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["users"],"summary":"Delete User","description":"Удалить пользователя","operationId":"delete_user_api_v1_users__user_id__delete","parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"integer","title":"User Id"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/config/university":{"get":{"tags":["config"],"summary":"Get University Config","description":"Получить конфигурацию University API","operationId":"get_university_config_api_v1_config_university_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UniversityConfigResponse"}}}}}},"put":{"tags":["config"],"summary":"Update University Config","description":"Создать или обновить конфигурацию University API","operationId":"update_university_config_api_v1_config_university_put","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UniversityConfigRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UniversityConfigResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/config/university/endpoints":{"get":{"tags":["config"],"summary":"Get University Endpoints","description":"Получить только endpoints из конфигурации","operationId":"get_university_endpoints_api_v1_config_university_endpoints_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":{"type":"string"},"type":"object","title":"Response Get University Endpoints Api V1 Config University Endpoints Get"}}}}}}},"/api/v1/students/login":{"post":{"tags":["students"],"summary":"Login Student","description":"Выполнить логин на сайте университета и сохранить связь с пользователем MAX\n\nВызывает University API для логина, получает cookies и сохраняет их в БД","operationId":"login_student_api_v1_students_login_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/StudentLoginRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/StudentLoginResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/students/{user_id}/status":{"get":{"tags":["students"],"summary":"Get Student Status","description":"Получить статус связи пользователя с аккаунтом студента","operationId":"get_student_status_api_v1_students__user_id__status_get","parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"integer","title":"User Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/StudentStatusResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/students":{"get":{"tags":["students"],"summary":"Get All Students","description":"Получить список всех привязанных аккаунтов студентов","operationId":"get_all_students_api_v1_students_get","parameters":[{"name":"skip","in":"query","required":false,"schema":{"type":"integer","default":0,"title":"Skip"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":100,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/StudentCredentialsResponse"},"title":"Response Get All Students Api V1 Students Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/students/{user_id}":{"get":{"tags":["students"],"summary":"Get Student Credentials","description":"Получить credentials пользователя по user_id","operationId":"get_student_credentials_api_v1_students__user_id__get","parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"integer","title":"User Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/StudentCredentialsResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["students"],"summary":"Update Student Credentials","description":"Обновить credentials студента","operationId":"update_student_credentials_api_v1_students__user_id__put","parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"integer","title":"User Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/StudentCredentialsUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/StudentCredentialsResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["students"],"summary":"Delete Student Credentials","description":"Полностью удалить связь студента (жесткое удаление)","operationId":"delete_student_credentials_api_v1_students__user_id__delete","parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"integer","title":"User Id"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/students/{user_id}/unlink":{"delete":{"tags":["students"],"summary":"Unlink Student","description":"Отвязать аккаунт студента от пользователя (мягкое удаление)","operationId":"unlink_student_api_v1_students__user_id__unlink_delete","parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"integer","title":"User Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/students/{user_id}/teachers":{"get":{"tags":["students"],"summary":"Get Student Teachers","description":"Получить список преподавателей для пользователя\n\nПередает student_email в University API, который сам получает cookies из своей БД и парсит данные","operationId":"get_student_teachers_api_v1_students__user_id__teachers_get","parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"integer","title":"User Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TeachersResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/students/{user_id}/personal_data":{"get":{"tags":["students"],"summary":"Get Student Personal Data","description":"Получить данные студента\n\nПередает student_email в University API, который сам получает cookies из своей БД и парсит данные","operationId":"get_student_personal_data_api_v1_students__user_id__personal_data_get","parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"integer","title":"User Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PersonalDataResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/students/{user_id}/teacher/{teacher_id}":{"get":{"tags":["students"],"summary":"Get Teacher Info","description":"Получить информацию о преподавателе\n\nПередает student_email и teacher_id в University API, который сам получает cookies из своей БД и парсит данные","operationId":"get_teacher_info_api_v1_students__user_id__teacher__teacher_id__get","parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"integer","title":"User Id"}},{"name":"teacher_id","in":"path","required":true,"schema":{"type":"string","title":"Teacher Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TeacherInfoResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/students/{user_id}/schedule":{"get":{"tags":["students"],"summary":"Get Student Schedule","description":"Получить расписание для пользователя\n\nArgs:\n    user_id: ID пользователя MAX\n    week: Номер недели (1 = текущая неделя, 2 = следующая неделя)\n\nПередает student_email и week в University API, который сам получает cookies из своей БД и парсит данные","operationId":"get_student_schedule_api_v1_students__user_id__schedule_get","parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"integer","title":"User Id"}},{"name":"week","in":"query","required":false,"schema":{"type":"integer","default":1,"title":"Week"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ScheduleResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/students/{user_id}/contacts":{"get":{"tags":["students"],"summary":"Get Student Contacts","description":"Получить контакты деканатов и кафедр для пользователя\n\nПередает student_email в University API, который сам получает cookies из своей БД и парсит данные","operationId":"get_student_contacts_api_v1_students__user_id__contacts_get","parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"integer","title":"User Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ContactsResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/students/{user_id}/platforms":{"get":{"tags":["students"],"summary":"Get Student Platforms","description":"Получить список полезных веб-платформ для пользователя\n\nПередает запрос в University API, который возвращает статический список платформ","operationId":"get_student_platforms_api_v1_students__user_id__platforms_get","parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"integer","title":"User Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PlatformsResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}}},"components":{"schemas":{"ContactsResponse":{"properties":{"success":{"type":"boolean","title":"Success"},"deans":{"anyOf":[{"items":{},"type":"array"},{"type":"null"}],"title":"Deans"},"departments":{"anyOf":[{"items":{},"type":"array"},{"type":"null"}],"title":"Departments"},"error":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Error"}},"type":"object","required":["success"],"title":"ContactsResponse","description":"Ответ с контактами деканатов и кафедр"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"PersonalDataResponse":{"properties":{"success":{"type":"boolean","title":"Success"},"data":{"anyOf":[{"additionalProperties":{"anyOf":[{"type":"string"},{"type":"null"}]},"type":"object"},{"type":"null"}],"title":"Data"},"error":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Error"}},"type":"object","required":["success"],"title":"PersonalDataResponse","description":"Ответ с данными студента"},"PlatformsResponse":{"properties":{"success":{"type":"boolean","title":"Success"},"platforms":{"anyOf":[{"items":{},"type":"array"},{"type":"null"}],"title":"Platforms"},"error":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Error"}},"type":"object","required":["success"],"title":"PlatformsResponse","description":"Ответ со списком полезных веб-платформ"},"ScheduleResponse":{"properties":{"success":{"type":"boolean","title":"Success"},"schedule":{"anyOf":[{"items":{},"type":"array"},{"type":"null"}],"title":"Schedule"},"error":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Error"}},"type":"object","required":["success"],"title":"ScheduleResponse","description":"Ответ с расписанием"},"StudentCredentialsResponse":{"properties":{"id":{"type":"integer","title":"Id"},"user_id":{"type":"integer","title":"User Id"},"student_email":{"type":"string","title":"Student Email"},"is_active":{"type":"boolean","title":"Is Active"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"last_login_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Last Login At"}},"type":"object","required":["id","user_id","student_email","is_active","created_at"],"title":"StudentCredentialsResponse","description":"Ответ с данными credentials"},"StudentCredentialsUpdate":{"properties":{"student_email":{"anyOf":[{"type":"string","format":"email"},{"type":"null"}],"title":"Student Email"},"password":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Password"}},"type":"object","title":"StudentCredentialsUpdate","description":"Обновление credentials"},"StudentLoginRequest":{"properties":{"user_id":{"type":"integer","title":"User Id"},"student_email":{"type":"string","format":"email","title":"Student Email"},"password":{"type":"string","title":"Password"}},"type":"object","required":["user_id","student_email","password"],"title":"StudentLoginRequest","description":"Запрос на логин студента"},"StudentLoginResponse":{"properties":{"success":{"type":"boolean","title":"Success"},"message":{"type":"string","title":"Message"},"student_email":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Student Email"}},"type":"object","required":["success","message"],"title":"StudentLoginResponse","description":"Ответ на запрос логина"},"StudentStatusResponse":{"properties":{"is_linked":{"type":"boolean","title":"Is Linked"},"student_email":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Student Email"},"linked_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Linked At"}},"type":"object","required":["is_linked"],"title":"StudentStatusResponse","description":"Статус связи пользователя с аккаунтом студента"},"TeacherInfoResponse":{"properties":{"success":{"type":"boolean","title":"Success"},"departments":{"anyOf":[{"items":{},"type":"array"},{"type":"null"}],"title":"Departments"},"photo":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Photo"},"error":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Error"}},"type":"object","required":["success"],"title":"TeacherInfoResponse","description":"Ответ с информацией о преподавателе"},"TeachersResponse":{"properties":{"success":{"type":"boolean","title":"Success"},"teachers":{"anyOf":[{"items":{},"type":"array"},{"type":"null"}],"title":"Teachers"},"error":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Error"}},"type":"object","required":["success"],"title":"TeachersResponse","description":"Ответ со списком преподавателей"},"UniversityConfigRequest":{"properties":{"university_api_base_url":{"type":"string","title":"University Api Base Url"},"endpoints":{"additionalProperties":{"type":"string"},"type":"object","title":"Endpoints","default":{}}},"type":"object","required":["university_api_base_url"],"title":"UniversityConfigRequest","description":"Запрос на создание/обновление конфигурации"},"UniversityConfigResponse":{"properties":{"id":{"type":"integer","title":"Id"},"university_api_base_url":{"type":"string","title":"University Api Base Url"},"endpoints":{"additionalProperties":{"type":"string"},"type":"object","title":"Endpoints"}},"type":"object","required":["id","university_api_base_url","endpoints"],"title":"UniversityConfigResponse","description":"Ответ с конфигурацией"},"UserCreate":{"properties":{"user_id":{"type":"integer","title":"User Id"},"first_name":{"type":"string","title":"First Name"},"last_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Last Name"},"username":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Username"}},"type":"object","required":["user_id","first_name"],"title":"UserCreate"},"UserResponse":{"properties":{"id":{"type":"integer","title":"Id"},"user_id":{"type":"integer","title":"User Id"},"first_name":{"type":"string","title":"First Name"},"last_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Last Name"},"username":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Username"}},"type":"object","required":["id","user_id","first_name","last_name","username"],"title":"UserResponse"},"UserUpdate":{"properties":{"first_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"First Name"},"last_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Last Name"},"username":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Username"}},"type":"object","title":"UserUpdate"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}}}}